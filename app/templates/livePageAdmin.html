<!-- livePageAdmin.html -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>live page admin</title>
  </head>
  <body>
    <h1 id="song-title">Song: {{song}}</h1>
    <p id="song-author">Author: {{author}}</p>

    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>

    <script>
      const socket = io.connect();

      /* Function to get query parameters
      //function getQueryParam(param) {
      //  const urlParams = new URLSearchParams(window.location.search);
      //  return urlParams.get(param);
      /}*/

      // Log the song and author
      console.log("Song Title:", "{{ song }}");
      console.log("Song Author:", "{{ author }}");

      //const songTitle = getQueryParam("song");
      //const songAuthor = getQueryParam("author");

      //console.log("Song Title:", songTitle);
      //console.log("Song Author:", songAuthor);

      // Set the song title and author
      //document.getElementById("song-title").innerText = "Song: " + songTitle;
      //document.getElementById("song-author").innerText =
      //"Author: " + songAuthor;

      // Handle "End Session" button click
      function endSession() {
        socket.emit("end_session"); // Notify players that the session has ended
        window.location.href = "/mainPageAdmin"; // Redirect admin to main page
      }

      const endSessionButton = document.createElement("button");
      endSessionButton.innerText = "End Session";
      endSessionButton.onclick = endSession;
      document.body.appendChild(endSessionButton);
    </script>
  </body>
</html>
